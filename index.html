<!DOCTYPE html>
<html>
    <!--<head>
        <script type="module" src="scripts/test.js"></script>
    </head>
    -->
    <body>
        <label>Villain Range</label><br>
        <canvas id="rangeCanvas" tabindex="1">
            Your browser does not support the canvas element.
        </canvas>

        <p>Syntax: Comma separated hands, with all hands explicitly specified. E.g., for QQ+ you need to do QQ, KK, AA<br>pair: TT <br> suited: 76s <br> unsuited: AKo. </p>
        <input id="vrange" type="text" value=""><br>

        <p>Our Hand: Specify each card with the exact suit, space separated.</p>
        <input id="hand" type="text" value="Kc Qc"><br>
        <p>Flop</p>
        <input id="flop" type="text" value="Ac 7d 2c"><br>
        <button id="btn">Calculate</button>
        <br>
        <p id="valor"> Valor: </p>
        <p id="equity"> Equity: </p>

        <script type="module">
            import {Range, PokerCard, calcValorVsRange, calcEquityVsRange} from './scripts/calc.js'
            import {RangeUI} from './scripts/range-ui.js'
            function calculate() {
                let vRangeStr = document.getElementById("vrange").value;
                let handStr = document.getElementById("hand").value;
                let flopStr = document.getElementById("flop").value;
                let vRange = Range.parseRange(vRangeStr);
                let hand = PokerCard.parseString(handStr);
                let flop = PokerCard.parseString(flopStr);
                let equity = calcEquityVsRange(hand, vRange, flop);
                let valor = calcValorVsRange(hand, vRange, flop);
                document.getElementById("valor").innerHTML = "Valor: " + valor.toLocaleString("en", {style: "percent", maximumSignificantDigits: 4});
                document.getElementById("equity").innerHTML = "Equity: " + equity.toLocaleString("en", {style: "percent", maximumSignificantDigits: 4});
            }
            document.getElementById("btn").addEventListener("click", calculate);

            let canvas = document.getElementById("rangeCanvas");
            let rangeTextBox = document.getElementById("vrange");
            let rangeUI = new RangeUI(canvas, rangeTextBox);
        </script>
    </body>
</html>

